---
title: "多云管理"
linktitle: "多云管理"
weight: 3
description: >
oem_ignore: true
   帮助用户解决多云接入以及删除等问题。
---

## 产品支持对接哪些平台？

目前{{<oem_name>}}支持对接的私有云平台有VMware、OpenStack、ZStack、DStack；公有云平台有阿里云、AWS、Azure、华为云、腾讯云、UCloud、谷歌云、天翼云、Ecloud。

## 管理公有云平台，云账号需要什么权限？

至少需要所操作资源的管理权限。建议授予云账号平台所有功能的管理权限。

## 对接云账号后，新建相关资源时为什么不显示云平台？

可能有以下原因：

- 云账号被禁用。
- 云账号状态为连接失败或不正常。
- 公有云某个区域下没有IP子网和VPC，新建虚拟机时不显示该区域所在的城市。
- 从云账号同步下来的宿主机禁用，新建虚拟机时不显示该云平台。

如不符合以上原因，请联系我们售后人员进行排查。


## 在其他云平台关闭虚拟机电源，在平台上该虚拟机过了十分钟左右仍然显示 运行中，是什么原因？

{{<oem_name>}}平台不会实时与其它平台进行同步更新，建议用户都使用{{<oem_name>}}平台进行管理操作。不要跨两个平台分别进行操作。

{{<oem_name>}}平台与其它云平台同步机制如下：

1. 自动同步，用户在添加云账号时或对已纳管的云账号进行“设置自动同步”操作实现定期的状态同步。
2. 手动同步，支持对云账号或单个资源进行状态同步。用户可以单击资源操作列的 **_"同步状态"_** 按钮，实现主动同步单个资源的状态。

## 如何删除一个已经同步导入资源信息的云账号？

在云管平台上添加云账号，并执行全量同步操作后，会导入云账号下的资源信息，如虚拟机、EIP、VPC等。删除云账号时由于云管平台上存在由该云账号导入的资源，所以无法删除云账号，需要先删除该云账号关联的资源，才可以删除云账号，然而该操作比较麻烦。由此，云管平台提供了删除云账号的脚本clean_provider.sh，该脚本将会自动遍历云账号导入的所有资源信息，逐个删除相应的数据库记录，最终删除云账号。

通过ssh远程连接控制节点，执行以下命令：

```bash
$ export API_VERSION=V2 #脚本使用V2版本的API，所以需要显式声明
$ cd /opt/yunion/scripts/tools/
$ ./clean_provider.sh <provider_id_or_name>
```
## 如何设置OpenStack的虚拟机免密登陆？

在云管平台中需要把OpenStack虚拟机所在的VPC中direct值设置为true，然后在平台中设置免密登陆成功，再安装监控agent。

```bash
$ source <(ocadm cluster rcadmin)
$ climc server-show 虚拟机名称 | grep vpc_id  # 查看虚拟机所在vpc的id
$ climc vpc-update --direct vpc_id  # vpc_id为上述查询的值
```

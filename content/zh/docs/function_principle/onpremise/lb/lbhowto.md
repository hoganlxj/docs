---
title: "负载均衡平台配置"
weight: 60
description: >
  本文介绍如何配置和使用负载均衡
---

## 负载均衡工作原理？

负载均衡的功能由负载均衡集群实现，负载均衡集群由多个负载均衡节点组成，每个节点是一台运行负载均衡软件的Linux主机。集群下的节点均部署同样的软件和配置，互为主备，并且同一时刻只有一个主节点。负载均衡节点都运行keepalived高可用软件，keepalived检测每个节点的健康状况，确保只有一个主节点提供服务。

每个负载均衡节点内部署了开源负载均衡软件 [haproxy](https://www.haproxy.org/) v1.8.19，提供TCP和http/https负载均衡，以及 [gobetween]() v0.7.1 提供UDP负载均衡。

## 负载均衡的配置

为了让负载均衡功能正常工作，管理员需要在平台进行相关的配置，大概分为两步：

### 第一步：部署负载均衡节点

负载均衡节点是流程负载均衡功能的实际执行者，至少需要部署1个负载均衡节点。

部署一个负载均衡节点的具体步骤请参见[Lbagent部署](./lbagent)。

一般建议做法是新建一台单网口的经典网络虚拟机，将该虚拟机作为负载均衡节点加入集群。

建议部署2台负载均衡节点。

### 第二步：配置负载均衡集群

新建负载均衡集群，并将第一步部署的负载均衡节点加入该集群。等待大约15分钟后，在节点的服务获取到集群的配置后，集群开始正常工作。

以上配置步骤完成后，即可开始负载均衡的使用。




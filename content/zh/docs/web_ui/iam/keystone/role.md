---
title: "角色"
weight: 6
description: 角色是一系列权限的集合，用户加入项目时的角色决定了用户在项目中的权限。
---

角色是一系列权限的集合，用户加入项目时的角色决定了用户在项目中的权限。

系统内置角色说明如下：

| 角色          | 权限          | 是否共享 | 权限范围 | 权限说明                                                     |
| ------------- | ------------- |-------- |  -------- | ----------------------------------------------------------- |
| admin         | sysadmin      | 全局共享     | 系统     | 用户只有以admin角色加入default的system项目时才有管理后台全部权限。 |
| domainadmin   | domainadmin   | 全局共享     | 域       | 域管理后台全部权限     |
| project_owner | projectadmin | 全局共享     | 项目     | 项目范围内的全部权限                                         |
| project_editor | projecteditor | 全局共享 | 项目 | 项目范围内任意资源的编辑操作权限     |
| member        | projectviewer、projectdashboard  | 全局共享  | 项目     | 项目范围内任意资源的只读权限   |
| fa            | sysmeteradmin、sysdashboard  |  全局共享     | 系统 | 系统内计费计量的全部权限   |

**入口**：在云管平台单击左上角![](../../../images/intro/nav.png)导航菜单，在弹出的左侧菜单栏中单击 **_"认证与安全/认证体系/角色"_** 菜单项，进入角色页面。

![](../../../images/iam/role.png)

## 新建角色

该功能用于创建角色，当系统内置角色不满足用户需求时，可以创建自定义角色。

1. 在角色页面，单击列表上方 **_"新建"_** 按钮，弹出新建角色对话框。
2. 输入名称，角色所属域，单击 **_"下一步"_** 按钮，进入关联权限对话框。
3. 配置以下参数：
    - 权限：选择角色关联的权限，在弹出的请选择权限的对话框中选择权限，支持多选。
    - IP白名单：设置IP白名单IP地址以及地址段，只有处于IP白名单内的用户登录才会拥有对应角色和权限，若为空，则允许所有IP访问。格式为192.168.1.1或192.168.1.0/24，多个IP地址以英文”;“分割。
    - 项目：设置权限在指定项目生效，若不指定项目，则权限全局生效；若指定项目，则权限只在指定项目生效，在其他项目无效；
4. 单击 **_"确定"_** 按钮，完成操作。

## 管理权限

该功能用于管理角色关联的权限。

### 添加权限

该功能用于为角色添加权限。

1. 在角色页面，单击角色右侧操作列 **_"管理权限"_** 按钮，进入详情-权限页面。
2. 单击列表上方 **_"添加权限"_** 按钮，弹出添加权限对话框。
3. 配置以下参数：
    - 权限：选择角色关联的权限，在弹出的请选择权限的对话框中选择权限，支持多选。
    - IP白名单：设置IP白名单IP地址以及地址段，只有处于IP白名单内的用户登录才会拥有对应角色和权限，若为空，则允许所有IP访问。格式为192.168.1.1或192.168.1.0/24，多个IP地址以英文”;“分割。
    - 项目：设置权限在指定项目生效，若不指定项目，则权限全局生效；若指定项目，则权限只在指定项目生效，在其他项目无效；
4. 单击 **_"确定"_** 按钮，完成操作。

### 移除权限

该功能用于为角色移除权限。

**单个移除**

1. 在角色页面，单击角色右侧操作列 **_"管理权限"_** 按钮，进入详情-权限页面。
2. 单击权限右侧操作列 **_"移除"_** 按钮，弹出操作确认对话框。
3. 单击 **_"确定"_** 按钮，完成操作。

**批量移除**

1. 在角色页面，单击角色右侧操作列 **_"管理权限"_** 按钮，进入详情-权限页面。
2. 在列表中选择一个或多个权限，单击列表上方 **_"移除"_** 按钮，弹出操作确认对话框。
3. 单击 **_"确定"_** 按钮，完成操作。

## 设置共享

该功能用于设置角色的共享状态。

域资源的共享范围有三种：

- 不共享（私有）：即域资源只能本域的用户可以使用。
- 域共享-部分（多域共享）：即域资源可以共享到指定域（一个或多个），只有域资源所在域和共享域下的用户可以使用域资源。
- 域共享-全部（全局共享）：即域资源可以共享给全部域使用，即系统中所有用户都可以使用域资源。

{{% alert title="说明" %}}
设置共享的条件：需同时满足

- 当前用户在管理后台。
- 在{{<oem_name>}}已开启三级权限。
{{% /alert %}}

**单个设置共享**

1. 在角色页面，单击“私有”状态的角色右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"设置共享"_** 菜单项，弹出设置共享对话框。
2. 配置以下参数：
    - 当共享范围选择为“不共享”时，即域资源的共享范围为私有，仅本域的用户可以使用。
    - 当共享范围选择为“域共享”时，需要选择共享的域。
        - 当域选择其中的一个或多个域时，即域资源的共享范围为域共享-部分，只有域资源所在域和共享域下的用户可以使用域资源。
        - 当域选择全部时，即域资源的共享范围为域共享-全部，系统中的所有用户都可以使用域资源。
3. 单击 **_"确定"_** 按钮，完成操作。

**批量设置共享**

1. 在角色列表中选择一个或多个角色，单击列表上方 **_"设置共享"_** 按钮，弹出设置共享对话框。
2. 配置以下参数：
    - 当共享范围选择为“不共享”时，即域资源的共享范围为私有，仅本域的用户可以使用。
    - 当共享范围选择为“域共享”时，需要选择共享的域。
        - 当域选择其中的一个或多个域时，即域资源的共享范围为域共享-部分，只有域资源所在域和共享域下的用户可以使用域资源。
        - 当域选择全部时，即域资源的共享范围为域共享-全部，系统中的所有用户都可以使用域资源。
3. 单击 **_"确定"_** 按钮，完成操作。

## 删除角色

该功能用于删除角色，支持单个和批量删除角色。角色处于私有状态且未被使用时才可以删除角色。

**单个删除**

1. 在角色页面，单击角色右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"删除"_** 菜单项，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，完成操作。

**批量删除**

1. 在角色列表中选择一个或多个角色，单击列表上方 **_"删除"_** 按钮，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，完成操作。

## 查看角色详情

该功能用于查看角色的详细信息。

1. 在角色页面，单击角色名称项，进入角色详情页面。
2. 查看角色的云上ID、ID、名称、状态、域、项目、权限、匹配用户数量、共享范围、创建时间、更新时间、备注。

### 查看操作日志

该功能用于查看角色相关操作的日志信息。

1. 在角色页面，单击角色名称项，进入角色详情页面。
2. 单击“操作日志”页签，进入操作日志页面。
    - 加载更多日志：列表默认显示20条操作日志信息，如需查看更多操作日志，请单击 **_"加载更多"_** 按钮，获取更多日志信息。
    - 查看日志详情：单击操作日志右侧操作列 **_"查看"_** 按钮，查看日志的详情信息。支持复制详情内容。
    - 查看指定时间段的日志：如需查看某个时间段的操作日志，在列表右上方的开始日期和结束日期中设置具体的日期，查询指定时间段的日志信息。
    - 导出日志：目前仅支持导出本页显示的日志。单击右上角![](../../../images/system/download.png)图标，在弹出的导出数据对话框中，设置导出数据列，单击 **_"确定"_** 按钮，导出日志。

---
title: "权限"
weight: 7
description: 权限定义了对平台上资源的操作权限。
---

权限定义了对平台上资源的操作权限，系统部署完成后预置了常用权限，称为系统权限。用户本身没有任何权限，需要在用户加入项目时为其指定角色，并将权限关联到角色，才能使用户具有对应的操作权限。

{{% alert title="说明" %}}
系统权限结合用户视图、操作权限针对资源生成9种权限。

- 用户视图分为管理后台、域管理后台、项目视图；
- 操作权限分为管理权限、编辑权限、只读权限；
- 因此资源权限具体为全局下资源的管理、编辑、只读权限；本域下资源的管理、编辑、只读权限；本项目下资源的管理、编辑、只读权限；

{{% /alert %}}

**入口**：在云管平台单击左上角![](../../../images/intro/nav.png)导航菜单，在弹出的左侧菜单栏中单击 **_"认证与安全/认证体系/权限"_** 菜单项，进入权限页面。

![](../../../images/iam/policy.png)

## 新建权限

当系统权限不满足用户需求时，用户可创建自定义权限。

{{% alert title="注意" color="warning" %}}
新建、修改自定义权限后需要等待5分钟左右才会生效。
{{% /alert %}}

1. 单击列表上方 **_"新建"_** 按钮，进入新建权限页面。
2. 设置以下参数：
    - 域：选择权限所属的域。
    - 名称：自定义权限的名称。
    - 备注：对自定义权限进行备注。
    - 权限配置方式：支持可视化视图和YAML编辑视图。
        - 可视化视图：配置以下参数。
            - 管理权限：管理权限包括管理后台、域管理后台、无管理后台。管理权限对应列表中的权限范围系统、域、项目。并支持自定义不同视图下的节点权限。
                - 管理后台：即用户以拥有管理后台权限的角色加入项目后，可以切换到管理后台视图，并设置自定义管理后台视图下用户拥有的权限，包括计算、镜像、容器、认证、通知、日志、其他、计费计量、告警、流程等模块权限，并支持展开设置具体功能权限包括列表、详情、更新、创建、删除、执行操作等具体操作权限。
                - 域管理后台：即用户以拥有域管理后台权限的角色加入项目后，可以切换到域管理后台视图，并支持自定义域挂历后台视图系用户拥有的权限。包括计算、镜像、容器、认证、通知、日志、计费计量、告警等模块权限，并支持展开设置具体功能权限包括列表、详情、更新、创建、删除、执行操作等具体操作权限。
                - 无管理后台：即绑定该权限的用户只拥有项目视图，并设置自定义项目视图下用户拥有的权限。包括计算、镜像、容器、通知、日志、计费计量、告警等模块权限，并支持展开设置具体功能权限包括列表、详情、更新、创建、删除、执行操作等具体操作权限。由于用户以任意角色加入项目都将拥有member权限，当用户以拥有自定义项目视图权限的角色加入项目时，用户的权限为自定义权限和member权限的并集。
                - 所有权限后方搜索框支持搜索权限内容。
       - YAML编辑视图：
           - 权限内容：格式如下。
           ```yaml
            auth: true
            policy:
                compute:
                    servers:
                        create:
                            '*': allow
                        delete:
                             '*': deny
                        get:
                             '*': allow
                        vnc: allow
                        list:
                            '*': allow
                        perform:
                            '*': allow
                        update:
                            '*': allow
            scope: project
            ``` 
    - 域标签：仅权限范围选择管理后台，支持选择应用的域标签。
    - 项目标签：仅权限范围选择管理后台和域管理后台时，支持选择应用的项目标签。
    - 资源标签：支持选择应用的资源标签。            
3. 单击 **_"确定"_** 按钮，完成操作。

## 修改权限

该功能用于修改自定义权限的设置。系统权限不支持修改。

{{% alert title="注意" color="warning" %}}
- 新建、修改自定义权限后需要等待5分钟左右才会生效。
- 当以绑定权限角色的用户登录时，修改权限后需要单击浏览器的刷新按钮刷新页面修改的权限才会生效。
{{% /alert %}}

1. 单击权限右侧操作列 **_"修改"_** 按钮，进入修改权限页面。
2. 修改参数，同增加权限。
3. 修改完成后，单击 **_"确定"_** 按钮。

## 启用

该功能用于启用“禁用”状态的权限。支持单个和批量启用。

**单个启用**

1. 在权限页面，单击”禁用“状态权限右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"启用"_** 菜单项，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，完成操作。

**批量启用**

1. 在权限列表中选择一个或多个”禁用“状态权限，单击列表上方 **_"启用"_** 按钮，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，完成操作。

## 禁用

该功能用于禁用”启用“状态的权限，当非member权限被禁用时，权限匹配的角色将不具有该权限，如角色只绑定一种权限，禁用权限后，角色默认为member权限。若member权限被禁用，用户只有云管平台上镜像和网络的查看权限。支持单个和批量禁用。

**单个禁用**

1. 在权限页面，单击”启用“状态权限右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"禁用"_** 菜单项，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，完成操作。

**批量禁用**

1. 在权限列表中选择一个或多个”启用“状态的权限，单击列表上方 **_"禁用"_** 按钮，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，完成操作。

## 克隆

该功能用于基于已有权限克隆创建自定义权限。目前仅支持克隆出一模一样的权限，请在克隆完成后，通过修改功能修改权限。

1. 在权限页面，单击权限右侧操作列 **_"克隆"_** 按钮，弹出克隆对话框。
2. 输入名称，单击 **_"确定"_** 按钮，完成操作。

## 设置共享

该功能用于设置权限的共享状态。

域资源的共享范围有三种：

- 不共享（私有）：即域资源只能本域的用户可以使用。
- 域共享-部分（多域共享）：即域资源可以共享到指定域（一个或多个），只有域资源所在域和共享域下的用户可以使用域资源。
- 域共享-全部（全局共享）：即域资源可以共享给全部域使用，即系统中所有用户都可以使用域资源。

{{% alert title="说明" %}}
设置共享的条件：需同时满足

- 当前用户在管理后台。
- 在{{<oem_name>}}已开启三级权限。
{{% /alert %}}

**单个设置共享**

1. 在权限页面，单击“私有”状态的权限右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"设置共享"_** 菜单项，弹出设置共享对话框。
2. 配置以下参数：
    - 当共享范围选择为“不共享”时，即域资源的共享范围为私有，仅本域的用户可以使用。
    - 当共享范围选择为“域共享”时，需要选择共享的域。
        - 当域选择其中的一个或多个域时，即域资源的共享范围为域共享-部分，只有域资源所在域和共享域下的用户可以使用域资源。
        - 当域选择全部时，即域资源的共享范围为域共享-全部，系统中的所有用户都可以使用域资源。
3. 单击 **_"确定"_** 按钮，完成操作。

**批量设置共享**

1. 在权限列表中选择一个或多个权限，单击列表上方 **_"设置共享"_** 按钮，弹出设置共享对话框。
2. 配置以下参数：
    - 当共享范围选择为“不共享”时，即域资源的共享范围为私有，仅本域的用户可以使用。
    - 当共享范围选择为“域共享”时，需要选择共享的域。
        - 当域选择其中的一个或多个域时，即域资源的共享范围为域共享-部分，只有域资源所在域和共享域下的用户可以使用域资源。
        - 当域选择全部时，即域资源的共享范围为域共享-全部，系统中的所有用户都可以使用域资源。
3. 单击 **_"确定"_** 按钮，完成操作。

## 删除

该功能用于删除自定义权限，当自定义权限处于禁用状态即可删除。系统权限不支持删除。

**单个删除**

1. 在权限页面，单击”禁用“状态的权限右侧操作列 **_"删除"_** 按钮，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，完成操作。

**批量删除**

1. 在权限列表中选择一个或多个“禁用”状态的权限，单击列表上方 **_"删除"_** 按钮，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，完成操作。

## 查看权限详情

该功能用于查看权限的详细信息。

1. 在权限页面，单击权限名称项，进入权限详情页面。
2. 详情页面顶部菜单项支持对权限进行管理操作。
3. 查看以下信息。
   - 基本信息：包括云上ID、ID、名称、状态、域、项目、启用状态、权限范围、是否共享、角色、IP白名单、创建时间、更新时间、备注。
   - 权限：包括管理权限和节点权限。

## 查看操作日志

该功能用于查看权限相关操作的日志信息。

1. 在权限页面，单击权限名称项，进入权限详情页面。
2. 单击“操作日志”页签，进入操作日志页面。
    - 加载更多日志：列表默认显示20条操作日志信息，如需查看更多操作日志，请单击 **_"加载更多"_** 按钮，获取更多日志信息。
    - 查看日志详情：单击操作日志右侧操作列 **_"查看"_** 按钮，查看日志的详情信息。支持复制详情内容。
    - 查看指定时间段的日志：如需查看某个时间段的操作日志，在列表右上方的开始日期和结束日期中设置具体的日期，查询指定时间段的日志信息。
    - 导出日志：目前仅支持导出本页显示的日志。单击右上角![](../../../images/system/download.png)图标，在弹出的导出数据对话框中，设置导出数据列，单击 **_"确定"_** 按钮，导出日志。

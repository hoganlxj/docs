---
title: "物理机"
weight: 2
description: 物理机用于创建裸金属设备，裸金属独占物理机资源。 
---

物理机是在云管平台注册IPMI信息，可以被云管平台完全管理和控制的物理服务器。物理机用于创建裸金属设备，裸金属独占物理机资源。

物理机支持纳管的服务器包括Dell、HP、华为、浪潮、联想、超微等主流x86服务器厂商和机型。

**入口**：在云管平台单击左上角![](../../../images/intro/nav.png)导航菜单，在弹出的左侧菜单栏中单击 **_"主机/基础资源/物理机"_** 菜单项，进入物理机页面。

  ![](../../../images/computing/server.png)

- 列表右上方将显示物理机总数以及处于运行、关机、操作失败以及未知状态的物理机数量。

    ![](../../../images/computing/statistics.png)

## 查看物理机列表

该功能用于查看物理机列表的信息。

1. 在云管平台单击左上角![](../../../images/intro/nav.png)导航菜单，在弹出的左侧菜单栏中单击 **_"主机/基础资源/物理机"_** 菜单项，进入物理机页面。
2. 查看以下参数： 
   - 启用：表示物理机是否能用于创建裸金属，只有启用状态的物理机可以创建裸金属。
   - 状态：物理机的运行状态。
   - IP：包括物理机的管理IP和带外IP，带外IP即IPMI的IP地址。
   - SN：序列号等。
   - 分配：显示物理机是否已分配创建了裸金属，此处显示具体的物理机创建的裸金属名称。
   - 初始账号：获取连接物理机的用户名和密码。
   - IPMI：包括IPMI用户名、IPMI密码和IPMI IP。
   - 维护模式：查看物理机是否进入维护模式，进入维护模式的物理机即进入了yunionos小系统。

## 添加物理机

目前{{<oem_name>}}平台支持四种添加物理机的方式，请根据下图选择具体的添加方式。

![](../../../images/computing/addphysicalmachine.png)

- 托管：用于托管已有操作系统的物理机，托管成功后将同时创建一条裸金属记录。
- 预注册：用于预上架未配置BMC信息的服务器，通过预注册功能提供服务器的MAC地址以及需要配置的BMC信息，待服务器设置PXE启动并上电后，{{<oem_name>}}平台的Baremetal服务会响应MAC地址匹配的服务器发起的PXE请求，并引导服务器加载YunionOS小系统，收集服务器信息并重置BMC信息，完成物理机的注册。
- ISO引导注册：用于立即引导已配置BMC信息的服务器，该方式不要求服务器处于DHCP Relay网络环境，但是要求服务器支持RedFish功能。通过Redfish API验证BMC配置信息，引导服务器加载YunionOS小系统，收集更多的服务器配置信息。
- PXE引导注册：用于立即引导已配置BMC信息的服务器，该方式要求服务器处于DHCP Relay网络环境且将服务器设置为PXE启动，通过IPMI验证BMC配置信息，引导服务器加载YunionOS小系统，收集更多的服务器配置信息。

{{% alert title="说明" %}}
- 在添加物理机之前请确保已启用了Baremetal服务，若未启用Baremetal服务，物理机页面的添加按钮置灰无法使用。此时需要用户按照[启用Baremetal](../../../../quick/install/#启用baremetal服务)的步骤启用Baremetal服务，启用后刷新浏览器即可正常使用添加物理机功能。
- YunionOS是通过带外控制将服务器引导启动进入的一个临时操作系统，在该操作系统中支持配置RAID、部署操作系统镜像等。
{{% /alert %}}

### ISO引导注册

该功能用于立即注册并引导已配置BMC信息的服务器，该功能不要求服务器处于DHCP Relay网络环境，但是要求服务器支持RedFish功能。

1. 在物理机页面，单击 **_"添加"_** 按钮，进入添加物理机页面。
2. 选择指定域、添加方式为“ISO引导注册”，支持以下两种ISO引导注册的方式。
    - 单条录入：配置以下参数。
        - 指定域：选择物理机所属的域。
        - 物理机名称：设置物理服务器的名称。
        - IPMI地址：输入服务器上已配置好的IPMI地址。
        - IPMI用户名：输入服务器上已配置好的IPMI用户名。
        - IPMI密码：输入服务器上已配置好的IPMI密码信息。若输入的BMC信息不正确则无法正确完成引导注册。
        - 管理口IP：选择IP子网，如需指定静态IP，可单击 **_"手动配置IP"_** 按钮，设置IP地址，单击 **_"确定"_** 按钮。由于ISO引导注册适用于没有DHCP Relay的环境，所以用户必须配置提供服务器管理口接入的IP子网或IP地址信息。
        - 只注册不引导：不重启引导进入YunionOS系统，勾选该项后，仅收集到服务器的部分信息，此时的服务器无法用于创建裸金属，需要进行检测硬件配置操作使其正式投入生产使用。
    - 模板导入：支持导入含有物理机注册信息的XLSX格式的模板文件。
        - 导入物理机信息需要按照预先设定的格式，请先下载模板。

          ![](../../../images/computing/isoimport1.png)

        - 在下载的host_template.xlsx文件中补充物理机的信息。所有物理机信息请都放在同一个sheet页面中。
        - 单击虚线框或将模板文件拖拽到虚线框，单击 **_"确定"_** 按钮，上传模板文件。
        - 只注册不引导：不重启引导进入YunionOS系统，勾选该项后，仅收集到服务器的部分信息，此时的服务器无法用于创建裸金属，需要进行检测硬件配置操作使其正式投入生产使用。

3. 单击 **_"确定"_** 按钮，完成引导注册。

### PXE引导注册

该功能用于立即注册并引导已配置BMC信息的服务器，该功能要求服务器处于DHCP Relay网络环境。

1. 在物理机页面，单击 **_"添加"_** 按钮，进入添加物理机页面。
2. 选择指定域、添加方式为“PXE引导注册”，支持以下两种PXE引导注册的方式。
    - 单条录入：配置以下参数。
        - 指定域：选择物理机所属的域。
        - 物理机名称：设置物理服务器的名称。
        - IPMI地址：输入服务器上已配置好的IPMI地址。
        - IPMI用户名：输入服务器上已配置好的IPMI用户名。
        - IPMI密码：输入服务器上已配置好的IPMI密码信息。若输入的BMC信息不正确则无法正确完成引导注册。
        - 管理口MAC地址：设置服务器的管理口MAC地址，支持Redfish的服务器无需填写该项。
        - 管理口IP：选填。支持选择IP子网，如需指定静态IP，可单击 **_"手动配置IP"_** 按钮，设置IP地址，单击 **_"确定"_** 按钮。留空则由DHCP自动分配IP。
        - 只注册不引导：不重启引导进入YunionOS系统，勾选该项后，仅收集到服务器的部分信息，此时的服务器无法用于创建裸金属，需要进行检测硬件配置操作使其正式投入生产使用。
    - 模板导入：支持导入含有物理机注册信息的XLSX格式的模板文件。
        - 导入物理机信息需要按照预先设定的格式，请先下载模板。

          ![](../../../images/computing/pxeimport1.png)

        - 在下载的host_template.xlsx文件中补充物理机的信息。所有物理机信息请都放在同一个sheet页面中。
        - 单击虚线框或将模板文件拖拽到虚线框，单击 **_"确定"_** 按钮，上传模板文件。
        - 只注册不引导：不重启引导进入YunionOS系统，勾选该项后，仅收集到服务器的部分信息，此时的服务器无法用于创建裸金属，需要进行检测硬件配置操作使其正式投入生产使用。
    
3. 单击 **_"确定"_** 按钮，完成引导注册。

### 预注册

该功能用于预上架未配置BMC信息的服务器，预注册操作仅配置相关信息，待服务器设置PXE启动且上电后才会真正引导注册到云管平台。要求服务器处于DHCP Relay环境。

{{% alert title="说明" %}}
- 若服务器已配置了BMC信息，此时选择预注册方式添加物理机，在引导过程中将会重新配置服务器的BMC信息为预注册时配置的信息，可能会造成服务器的BMC信息改变。
{{% /alert %}}

1. 在物理机页面，单击 **_"添加"_** 按钮，进入添加物理机页面。
2. 选择指定域、添加方式为“预注册”，支持以下三种方式预注册物理机。

  - 单条录入：配置以下参数。
      - 指定域：选择物理机所属的域。
      - MAC地址：物理机设备的MAC地址。
      - 物理机名称：物理机设备的名称。
      - IPMI地址：设置物理机的IPMI地址，当不设置该参数时，若平台上存在IPMI的IP子网，系统将自动为其分配IP地址，一般建议新机器留空，旧机器设置之前的IP地址。
      - IPMI用户名：设置IPMI管理用户名。当不设置该参数时，系统默认使用root用户登录，一般建议新机器留空，旧机器设置之前的用户名。
      - IPMI密码：设置IPMI用户的密码。当不设置该参数时，系统默认密码为YunionDev@123。一般建议新机器留空，旧机器设置之前的密码。
      - 设置完成后，单击 **_"确定"_** 按钮。

  - 批量录入：请注意以下内容。
      - 一行为一条物理机记录，一次最多支持导入100条记录。
      - 录入信息格式为“MAC地址,名称,IPMI地址,IPMI用户名,IPMI密码”，中间以英文逗号“,”分割，若密码中包含中文逗号“，”需要使用单条录入功能进行注册。
      - 其中MAC地址和名称为必填项，其他参数可省略不填写。
      - 例如：ee:b3:f4:48:1c:f5,gpuhost01,192.168.1.1,root,admin123
      - 例如：ee:b3:f4:48:1c:f5,gpuhost01,,, --省略了IPMI地址、IPMI用户名和IPMI密码
      - 录入完成后，单击 **_"确定"_** 按钮。

  - 模板导入：支持导入含有物理机注册信息的XLSX格式的模板文件。

      - 导入物理机信息需要按照预先设定的格式，请先下载模板。

          ![](../../../images/computing/preimport1.png)

      - 在下载的host_template.xlsx文件中补充物理机的信息。所有物理机信息请都放在同一个sheet页面中。
      - 单击虚线框或将模板文件拖拽到虚线框，单击 **_"确定"_** 按钮，上传模板文件。

3. 预注册信息配置完成后，需要管理员手动将配置注册信息的服务器设置为PXE启动，并上电，服务器将自动完成注册引导。

### 托管

该功能用于纳管已经装好操作系统的服务器。通过在已安装操作系统的服务器中执行以下命令使物理机可以被云管平台纳管，同时将在裸金属列表中创建一个与原服务器操作系统配置相同的裸金属服务器。

在托管服务器之前，请确保以下条件：

- 平台上已创建了包含物理服务器的IPMI类型和物理机类型的IP子网；
- 物理服务器已配置了BMC信息（IPMI地址、用户名、密码）；
- 物理服务器已放开2222或之后端口；如2222端口已被占用，则需放开2222之后的端口。

{{% alert title="说明" %}}
托管的物理机所在域与操作用户有关。
{{% /alert %}}

1. 在物理机页面，单击 **_"添加"_** 按钮，进入添加物理机页面。
2. 选择添加方式为“托管”，单击 **_"点击复制"_** 按钮，将复制的命令在需要被纳管的物理机上执行。

    ![](../../../images/computing/hosting1.png)

3. 执行过程中，需要输入服务器的IPMI用户名、密码、IPMI IP地址等。
4. 执行完成后，将会在列表中显示已被云管平台纳管的物理机。

## 远程终端

该功能支持使用SOL（Serial over LAN）和ssh远程连接到物理机。SOL即通过串口进行远程连接。连接之后需要使用初始账号列中的用户名和密码进行登录。

1. 在物理机页面，单击物理机右侧操作列 **_"远程终端"_** 按钮，选择下拉菜单 **_"SOL远程终端"_** 菜单项，通过SOL方式远程连接物理机。
2. 单击物理机右侧操作列 **_"远程终端"_** 按钮，选择下拉菜单 **_"SSH IP地址"_** 菜单项，与物理机建立web SSH连接。
3. 若物理机上的22端口被其他应用占用，ssh服务端口为其他端口时，可选择下拉菜单 **_"SSH IP地址:自定义端口"_** 菜单项，在弹出的对话框框中设置端口号，单击 **_"确定"_** 按钮与物理机建立web SSH连接。
4. 单击物理机右侧操作列 **_"远程终端"_** 按钮，选择下拉菜单 **_"Java控制台"_** 菜单项，下载并打开jnlp文件，连接物理机。

## 启用

该功能用于启用"禁用"状态的物理机。启用状态的物理机用于创建裸金属服务器。

**单个启用**

1. 在物理机页面，单击"禁用"状态的物理机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"启用"_** 菜单项，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，启用物理机。

**批量启用**

1. 在物理机列表中勾选一个或多个"禁用"状态的物理机，单击列表上方 **_"更多"_** 按钮，选择下拉菜单 **_"启用"_** 菜单项，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，启用物理机。


## 禁用

该功能用于禁用”启用“状态的物理机，禁用状态的物理机不能创建裸金属服务器。

**单个禁用**

1. 在物理机列表，单击”启用“状态的物理机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"禁用"_** 菜单项，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，禁用物理机。

**批量禁用**

1. 在物理机列表中勾选一个或多个"启用"状态的物理机，单击列表上方 **_"批量操作"_** 按钮，选择下拉菜单 **_"禁用"_** 菜单项，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，禁用物理机。

## 调整调度标签

该功能用于为物理机绑定调度标签，绑定调度标签的物理机将按照调度策略调度创建裸金属服务器。

1. 在物理机页面，根据需要绑定调度标签的物理机数量，选择调整调度标签的方式。当物理机需要绑定同一个标签时，推荐使用批量为物理机调整标签功能，若需要绑定不同标签，需要分别调整的调度标签。
    - 调整调度标签：单击物理机右侧操作列 **_更多_** 按钮，选择下拉菜单 **_"调整标签"_** 菜单项，在弹出调整调度标签对话框中选择调度标签，单击 **_"确定"_** 按钮。
    - 批量为物理机调整标签：在物理机列表中勾选一个或多个物理机，单击列表上方 **_批量操作_** 按钮，选择下拉菜单 **_"调整标签"_** 菜单项，在弹出调整调度标签对话框中选择调度标签，单击 **_"确定"_** 按钮。

## 同步状态

该功能用于同步物理机操作系统的运行状态。处于关机状态的物理机不支持同步状态。

1. 在物理机页面，根据需要同步状态的物理机数量，选择同步状态的方式。
    - 同步一个物理机状态：单击物理机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"同步状态"_** 菜单项，同步显示物理机运行状态。
    - 批量同步物理机状态：在物理机列表中勾选一个或多个物理机，单击列表上方 **_"批量操作"_** 按钮，选择下拉菜单 **_"同步状态"_** 菜单项，批量同步物理机状态。

## 安装操作系统

该功能用于新建裸金属设备。

1. 单击物理机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"安装操作系统"_** 菜单项，进入新建裸金属页面。
2. 设置以下参数：
    - 名称：裸金属设备名称。
    - 主机数量与规格：由于裸金属设备独占物理机，数量和规格不可改。
    - 操作系统：
        - 公共镜像：对应系统镜像列表中的Linux操作系统的公共镜像，由管理员维护。
        - 自定义镜像：对应系统镜像列表中的Linux操作系统的自定义镜像，一般是由用户上传。
        - 从ISO启动：对应系统镜像列表中ISO格式的Linux操作系统镜像。选择ISO镜像文件时，需要用户为裸金属服务器安装操作系统。
    - 磁盘配置：单击 **_"新增磁盘"_** 按钮，弹出新建磁盘配置对话框。
        - 选择物理机上的磁盘类型（HDD:3.6TIB表示物理机上一块磁盘大小为3.6TiB、磁盘类HDD）、设置RAID（包括不做RAID、RAID0、RAID1、RAID5、RAID10）
        - 设置磁盘数量，即使用几块相同配置的磁盘做RAID配置，如对磁盘做RAID0，磁盘利用率为100%；对2块磁盘做RAID1，磁盘利用率为50%；对3块及以上磁盘做RAID5，磁盘利用率为(n-1)/n；对4块及以上磁盘做RAID10，磁盘利用率为50%。
            - RAID0和不做RAID对磁盘数量无要求；
            - RAID1要求至少有2块相同的磁盘；
            - RAID5要求至少有3块相同的磁盘；
            - RAID10要求至少有4块相同的磁盘；
    
             ![](../../../images/computing/raid.png)
             ![](../../../images/computing/partition.png)
        - 磁盘RAID配置完成后，显示磁盘分区名称和大小信息，支持在界面修改分区，可分别单击“系统分区”黄色区域修改分区设置、单击“待分区”区域设置分区。分区参数如下：
            - 挂载点：设置分区挂载点，系统分区挂载点默认为“/”。
            - 分区格式：包括ext4、xfs、ntfs、swap分区。
            - 分区大小：包括最大容量和手动输入两种，最大容量使用磁盘所有空间，手动输入可以手动设置分区大小，单位为GB。

            ![](../../../images/computing/createpartition1\.png)

    - 网络：设置裸金属的IP地址。当环境中有两张与网线连接的网卡需要做绑定设置时，可勾选"启用bonding"
{{% alert title="说明" %}}
当物理机有两张连接网线的网卡时，将会自动绑定，当物理机有大于两张连接网线的网卡时，网卡绑定结果不可控，请谨慎操作。
{{% /alert %}}
        - 指定IP子网：选择IP子网，如需指定静态IP，可单击 **_"手动配置IP"_** 按钮，设置IP地址，单击 **_"确定"_** 按钮。
        - 指定调度标签：设置调度标签以及调度标签偏好。设置的调度标签偏好将会覆盖调度标签上的默认策略。根据调度标签及调度偏好选择最优的IP子网。
            - 尽量使用（prefer）：调度时优先使用拥有这种标签的IP子网。
            - 避免使用（avoid）：调度时尽量避免拥有这种标签的IP子网。
            - 禁止使用（exclude）：调度时排除拥有这种标签的IP子网。
            - 必须使用（require）：调度时必须使用拥有这种标签的IP子网。
    - 管理员密码：设置管理员密码，在Linux系统中为root用户的密码，在Windows操作系统中为administrator用户的密码。
        - 随机生成：随机生成管理员密码，用户可在物理机列表密码列查看复制管理员密码。
        - 关联密钥：仅支持Linux操作系统的物理机。在关联密钥之前请先在“网络-密钥”页面新建SSH密钥。关联密钥后，用户需要使用SSH密钥对登录物理机。
        - 保留镜像设置：管理员密码为镜像中已有的管理员密码。
        - 手工输入：可手动设置管理员密码。
    - 备注：设置裸金属的备注信息。
3. 单击 **_"新建"_** 按钮，创建裸金属设备。

## 转换为宿主机

该功能用于将物理机设备转换成宿主机。物理机用于创建裸金属服务器，宿主机用于创建虚拟机。

### 准备工作

1. 宿主机即安装了host服务的计算节点，在云管平台上将物理机转换为宿主机时需要使用由我司提供的专门制作的宿主机镜像。
2. 将该镜像上传到管理平台，并记录该镜像的id信息。
3. 在控制节点上通过climc命令设置物理机转换宿主机的默认镜像。

```bash
# 设置默认镜像的镜像id
$ climc service-config --config convert_hypervisor_default_template=a9b67435-8c08-4063-8ea6-d885ea26aa79 region2
```

4. 将物理机转换为宿主机时可直接选择磁盘RAID设置参数，进行转换宿主机操作。或通过自定义设置选择宿主机镜像，进行转换宿主机操作。

### 操作步骤

1. 在物理机页面，单击物理机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"转换为宿主机"_** 菜单项，弹出转换为宿主机对话框
2. 配置以下参数：
    - 宿主机名称：宿主机名称默认为物理机名称，可修改。
    - 宿主机类型：目前仅支持KVM宿主机。
    - 磁盘RAID配置：包括默认配置(最高冗余)、RAID-1/RAID-10（两倍冗余）、RAID-5（1.x倍冗余）、RAID-0（无冗余）、自定义配置等。
{{% alert title="注意" color="warning" %}}
- 当物理机只存在一个RAID控制器，且该控制器下存在大于等于4块相同配置的磁盘时，物理机磁盘支持以上所有选项；
- 当磁盘RAID配置为不是“自定义配置”时，物理机转换成宿主机的镜像为控制节点上region.conf配置文件中设置的镜像，且不支持设置网卡绑定。
- 当物理机上存储不同大小的磁盘时，只支持自定义配置；
{{% /alert %}}
    - 当选择默认配置(最高冗余)、RAID-1/RAID-10（两倍冗余）、RAID-5（1.x倍冗余）、RAID-0（无冗余）时，需要配置网络信息，选择是否启用bonding。
       - 网络：设置宿主机的IP地址。当环境中有两张与网线连接的网卡需要做绑定设置时，可勾选"启用bonding"
{{% alert title="说明" %}}
  当物理机有两张连接网线的网卡时，将会自动绑定，当物理机有大于两张连接网线的网卡时，网卡绑定结果不可控，请谨慎操作。
{{% /alert %}}
          - 指定IP子网：选择IP子网，如需指定静态IP，可单击 **_"手动配置IP"_** 按钮，设置IP地址，单击 **_"确定"_** 按钮。
          - 指定调度标签：设置调度标签以及调度标签偏好。设置的调度标签偏好将会覆盖调度标签上的默认策略。根据调度标签及调度偏好选择最优的IP子网。
              - 尽量使用（prefer）：调度时优先使用拥有这种标签的IP子网。
              - 避免使用（avoid）：调度时尽量避免拥有这种标签的IP子网。
              - 禁止使用（exclude）：调度时排除拥有这种标签的IP子网。
              - 必须使用（require）：调度时必须使用拥有这种标签的IP子网。
    - 当选择自定义配置时，需要选择磁盘镜像、在自定义磁盘配置中新增磁盘，选择磁盘以及RIAD配置，设置网络信息，选择是否bonding。
      - 镜像：当选择自定义设置时，需要设置镜像为专用于宿主机的镜像。
      - 自定义硬盘配置：单击 **_"新增磁盘"_** 按钮，弹出新建磁盘配置对话框。
          - 选择物理机上的磁盘类型（HDD:3.6TIB表示物理机上一块磁盘大小为3.6TiB、磁盘类HDD）、设置RAID（包括不做RAID、RAID0、RAID1、RAID5、RAID10）
          - 设置磁盘数量，即使用几块相同配置的磁盘做RAID配置，如对磁盘做RAID0，磁盘利用率为100%；对2块磁盘做RAID1，磁盘利用率为50%；对3块及以上磁盘做RAID5，磁盘利用率为(n-1)/n；对4块及以上磁盘做RAID10，磁盘利用率为50%。
              - RAID0和不做RAID对磁盘数量无要求；
              - RAID1要求至少有2块相同的磁盘；
              - RAID5要求至少有3块相同的磁盘；
              - RAID10要求至少有4块相同的磁盘；
               
                ![](../../../images/computing/raid.png)
                ![](../../../images/computing/partition.png)
      
          - 单击 **_"确定"_** 按钮，显示磁盘分区名称和大小信息，支持在界面修改分区，可分别单击“系统分区”黄色区域修改分区设置、单击“待分区”区域设置分区。分区参数如下：
              - 挂载点：设置分区挂载点，存储池默认挂载点为“/opt/cloud/workspace”。
              - 分区格式：包括ext4、xfs、ntfs、swap分区。
              - 分区大小：包括最大容量和手动输入两种，最大容量使用磁盘所有空间，手动输入可以手动设置分区大小，单位为GB。
      
               ![](../../../images/computing/createpartition1\.png)
        
      - 网络：设置宿主机的IP地址。当环境中有两张与网线连接的网卡需要做绑定设置时，可勾选"启用bonding"
{{% alert title="说明" %}}
  当物理机有两张连接网线的网卡时，将会自动绑定，当物理机有大于两张连接网线的网卡时，网卡绑定结果不可控，请谨慎操作。
{{% /alert %}}
          - 指定IP子网：选择IP子网，如需指定静态IP，可单击 **_"手动配置IP"_** 按钮，设置IP地址，单击 **_"确定"_** 按钮。
          - 指定调度标签：设置调度标签以及调度标签偏好。设置的调度标签偏好将会覆盖调度标签上的默认策略。根据调度标签及调度偏好选择最优的IP子网。
              - 尽量使用（prefer）：调度时优先使用拥有这种标签的IP子网。
              - 避免使用（avoid）：调度时尽量避免拥有这种标签的IP子网。
              - 禁止使用（exclude）：调度时排除拥有这种标签的IP子网。
              - 必须使用（require）：调度时必须使用拥有这种标签的IP子网。

3. 单击 **_"确定"_** 按钮，将物理机转换为宿主机。

## 验证IPMI信息

该功能用于验证物理机的IPMI信息配置是否正确以及是否已启用LAN上的IPMI信息。当物理机由于IPMI配置有问题而纳管失败后，用户修改IPMI配置后，可通过验证IPMI功能验证修改后的IPMI配置是否正确，正确后将会重新纳管物理机。

**验证IPMI信息**

1. 在物理机页面，单击物理机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"验证IPMI信息"_** 菜单项，开始验证配置的IPMI的正确性。


**批量验证IPMI信息**

1. 在物理机列表勾选一个或多个物理机，单击列表上方 **_"批量操作"_** 按钮，选择下拉菜单 **_"验证IPMI信息"_** 菜单项，开始验证配置的IPMI的正确性。

## 检测硬件配置

该功能用于同步获取物理机的硬件配置信息等。当用户添加物理机时勾选只注册不引导后需要使用检测硬件配置功能，使物理机可以正常被使用。

**检测硬件配置**

1. 在物理机页面，单击物理机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"检测硬件配置"_** 菜单项，同步物理机的硬件配置信息。

**批量检测硬件配置**

1. 在物理机列表勾选一个或多个物理机，单击列表上方 **_"批量操作"_** 按钮，选择下拉菜单 **_"检测硬件配置"_** 菜单项，同步物理机的硬件配置信息。

## 开机

该功能用于将关机状态的物理机开机。

**开机**

1. 在物理机页面，单击物理机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"开机"_** 菜单项，将物理机开机。

**批量开机**

1. 在物理机列表勾选一个或多个物理机，单击列表上方 **_"批量操作"_** 按钮，选择下拉菜单 **_"开机"_** 菜单项，将物理机开机。

## 关机

该功能用于将运行状态的物理机关机，当物理机已分配给裸金属使用时，不支持关机操作。

**关机**

1. 在物理机页面，单击物理机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"关机"_** 菜单项，将物理机关机。

**批量关机**

1. 在物理机列表勾选一个或多个物理机，单击列表上方 **_"批量操作"_** 按钮，选择下拉菜单 **_"关机"_** 菜单项，将物理机关机。

## 进入维护模式

该功能用于将已分配裸金属设备的物理机进入离线系统（yunionos网络启动小系统），管理员在离线系统可以进行更改分区、重做RAID、更改密码等操作。未分配的物理机默认就处于离线系统。

**进入维护模式**

1. 在物理机页面，单击物理机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"进入维护模式"_** 菜单项，进入维护模式。
2. 在维护模式下可以进行更改分区，重做RAID等操作。

**批量进入维护模式**

1. 在物理机列表中勾选一个或多个物理机，单击列表上方 **_"批量操作"_** 按钮，选择下拉菜单 **_"进入维护模式"_** 菜单项，进入维护模式。
2. 在维护模式下可以进行更改分区，重做RAID等操作。

## 退出维护模式

该功能用于退出维护模式。

**退出维护模式**

1. 在物理机页面，单击物理机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"退出维护模式"_** 菜单项，退出维护模式。

**批量退出维护模式**

1. 在物理机列表中勾选一个或多个物理机，单击列表上方 **_"批量操作"_** 按钮，选择下拉菜单 **_"退出维护模式"_** 菜单项，退出维护模式。

## 删除

该功能用于删除物理机，未分配给裸金属设备且禁用状态的物理机才可以删除。

**单个删除**

1. 在物理机页面，单击物理机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"删除"_** 菜单项，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，完成操作。

**批量删除**

1. 在物理机列表中勾选一个或多个物理机，单击列表上方 **_"批量操作"_** 按钮，选择下拉菜单 **_"删除"_** 菜单项，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，完成操作。

## 标签管理

请参考[多云管理-标签管理](../../../multiplecloud/tag/#标签管理)内容。

## 查看物理机详情

该功能用于查看物理机详细信息。

1. 在物理机页面，单击指定物理机名称项，进入物理机详情页面。
2. 详情页面顶部菜单项支持对物理机进行远程终端连接、启用、禁用、调整标签、同步状态、安装操作系统、转换为宿主机、检测硬件配置、开机、关机、进入维护模式、退出维护模式、删除等操作。
3. 查看物理机详细信息。
    - 基本信息：包括物理机的云上ID、ID、名称、状态、域、项目、共享范围、启用状态、维护模式、IP、分配、MAC地址、调度标签、host版本、硬件虚拟化、ISO启动、区域、可用区、云账号、创建时间、更新时间、备注。
    - 品牌信息：包括物理机的品牌名称、型号、序列号。
    - CPU：包括物理机CPU核数、插槽数、超售比、当前超售比例、描述。
    - 内存：包括物理机内存容量、系统预留、超售比、当前超售比例。
    - 存储：包括物理机存储容量、类型、当前超售比例、无效存储、适配器相关信息。
    - 网络接口：包括物理机的所有网卡信息，IP地址、MAC地址、子网掩码、类型以及速率。

### 查看物理机上的裸金属服务器信息

该功能用于查看物理机上的裸金属服务器信息，并支持对裸金属服务器进行管理操作。

1. 在物理机详情页面，单击“裸金属服务器”页签，进入裸金属服务器页面。
2. 查看裸金属服务器信息，并支持对裸金属服务器进行管理操作，具体操作使用方法请参考[裸金属](../../server/baremetal)页面。


### 查看物理机网络信息

该功能用于查看物理机的网络信息。

1. 在物理机详情页面，单击“网络”页签，进入网络页面。
2. 查看物理机的网络信息，包括序号、MAC地址、网卡类型、IP地址、IP子网、二层网络。其中MAC地址中显示为绿色，则表示已插好网线。
3. 当物理机上的网卡未分配IP地址时，支持设置二层网络。单击网卡操作列 **_设置二层网络_** 按钮，在弹出的设置二层网络对话框中选择二层网络，单击 **_"确定"_** 按钮。

### 查看物理机存储信息

该功能用于查看物理机上的存储信息。

1. 在物理机详情页面，单击“存储”页签，进入存储页面。
2. 查看物理机的存储信息，包括名称、容量、分配、浪费、存储类型、启用、挂载点。

### 查看物理机的GPU卡

该功能用于查看物理机的GPU卡设备。

1. 在物理机详情页面，单击“GPU”页签，进入GPU页面。
2. 查看物理机的GPU卡信息，包括设备类型、设备型号、所在物理机。

### 查看物理机的监控信息

该功能用于查看物理机的监控信息。

1. 在物理机详情页面，单击“监控”页签，进入监控页面。
2. 查看以下监控信息。
    - 以折线图的形式显示近1小时、近3小时、近6小时内的物理机CPU使用率信息、系统负载情况、内存使用率、内存使用情况、磁盘使用率、磁盘使用情况、磁盘IO使用率、磁盘IOPS、网络入流量、网络出流量。
        - CPU使用率包括CPU使用率、CPU空闲率、用户空间占用CPU、内核空间占用CPU、等待输入输出的CPU时间占比。
        - 系统负载情况包括系统1分钟平均负载、系统5分钟平均负载、系统15分钟平均负载、平均每个CPU核的系统1分钟平均负载、平均每个CPU核的系统5分钟平均负载、平均每个CPU核的系统15分钟平均负载。
        - 内存使用情况包括内存使用量、内存剩余量、内存总量。
        - 磁盘使用情况包括磁盘使用量、磁盘剩余量、磁盘总量。
        - 磁盘IOPS包括磁盘当前每秒平均读IO次数、磁盘当前每秒平均写IO次数）
3. 支持对上述监控信息设置监控告警。
    - 单击监控指标右侧 **_"设置监控告警"_** 按钮，弹出新建监控告警对话框。
    - 监控指标项已固定，设置查询周期、比较运算符、阈值、告警级别、告警方式、并选择告警接收人，单击 **_"确定"_** 按钮，新建告警。

### 查看物理机硬件日志

该功能用于查看物理机的硬件日志信息。

1. 在物理机详情页面，单击“硬件日志”页签，进入硬件日志页面。
2. 支持设置终止时间查询指定时间之前的硬件日志信息。
3. 当日志信息较多时，可单击列表下面 **_"加载更多"_** 按钮，查看更多硬件日志信息。

### 查看物理机操作日志

该功能用于查看物理机相关操作的日志信息。

1. 在物理机详情页面，单击“操作日志”页签，进入操作日志页面。
    - 加载更多日志：在页面，列表默认显示20条信息，如需查看更多，请单击 **_"加载更多"_** 按钮，获取更多日志信息。
    - 查看日志详情：单击右侧操作列 **_"查看"_** 按钮，查看日志的详情信息。支持复制详情内容。
    - 查看指定时间段的日志：如需查看某个时间段的，在列表右上方的开始日期和结束日期中设置具体的日期，查询指定时间段的日志信息。
    - 导出日志：目前仅支持导出本页显示的日志。单击右上角![](../../../images/system/download.png)图标，在弹出的导出数据对话框中，设置导出数据列，单击 **_"确定"_** 按钮，导出日志。

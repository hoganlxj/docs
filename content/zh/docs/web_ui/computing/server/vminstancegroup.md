---
title: "反亲和组"
weight: 3
description: 反亲和组是针对反亲和组中虚拟机的简单调度策略。
---

反亲和组是针对反亲和组中虚拟机的简单调度策略，根据反亲和组中的策略将属于反亲和组中新创建的虚拟机分布在不同宿主机上，从而实现业务的高可用。一般用于某个系统中要求系统中的各个节点部署在不同宿主机上的场景。

**入口**：在云管平台左侧菜单项中单击 **_"主机/主机/反亲和组"_** 菜单项，进入反亲和组页面。

![](../../../images/computing/vmgroup.png)

## 创建反亲和组

该功能用于创建反亲和组。

{{% alert title="说明" %}}
- 用户在管理后台创建的反亲和组所属项目为default域的system项目。
- 用户在项目中创建反亲和组时，反亲和组所属项目为用户所在项目。
{{% /alert %}}

1. 在反亲和组页面，单击列表上方 **_"新建"_** 按钮，弹出创建反亲和组对话框。
2. 设置以下参数：
    - 指定项目：选择反亲和组的所属项目。
    - 名称：反亲和组的名称。
    - 策略：包括强制和非强制。
        - 强制即强制要求属于同一反亲和组的虚拟机必须按照粒度分布在不同宿主机。不当宿主机上的虚拟机数量超过粒度后创建新虚拟机会失败。
        - 非强制即尽可能的将属于同一反亲和组的虚拟机按照粒度分布在不同宿主机，当宿主机上的虚拟机数量超过粒度后也可以创建。
    - 粒度：反亲和组内虚拟机可以在同一宿主机存在的数量。
3. 单击 **_"确定"_** 按钮，创建反亲和组。

## 关联虚拟机

该功能支持将已创建的虚拟机加入反亲和组，仅支持选择与反亲和组处于同一项目的虚拟机。已创建的虚拟机加入反亲和组后所属宿主机不会改变。当反亲和组处于禁用状态时不支持绑定主机操作。

1. 单击反亲和组右侧操作列 **_"关联虚拟机"_** 按钮，弹出绑定主机对话框。
2. 选择需要绑定的虚拟机，单击 **_"确定"_** 按钮。

## 绑定VIP

该功能用于为反亲和组绑定VIP，绑定后，VIP可以用于在该反亲和组包含的虚拟机之间使用。详情参考：[虚拟IP（VIP）](../../../../function_principle/onpremise/network/vpc/vpcvip)

1. 单击反亲和组右侧操作列 **_"添加VIP"_** 按钮，弹出添加VIP对话框。
2. IP地址选择自动分配或这顶IP后，单击 **_"确定"_** 按钮。

## 启用

该功能用于启用"禁用"状态的反亲和组。只有反亲和组处于"启用"状态才可以被用户选择使用。

1. 单击"禁用"状态的反亲和组右侧操作列 **_"启用"_** 按钮，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，启用反亲和组。

## 禁用

该功能用于禁用"启用"状态的反亲和组。

1. 单击"启用"状态的反亲和组右侧操作列 **_"禁用"_** 按钮，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，禁用反亲和组。

## 删除反亲和组

该功能用于删除反亲和组，当绑定主机数量为0时才可以删除反亲和组。

**单个删除**

1. 在反亲和组页面，单击反亲和组操作列 **_"更多"_** 按钮，选择下拉菜单 **_"删除"_** 菜单项，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，完成操作。

**批量删除**

1. 在反亲和组列表中勾选一个或多个反亲和组，单击列表上方 **_"删除"_** 按钮，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，完成操作。

## 查看反亲和组详情

该功能用于查看反亲和组详细信息、绑定的虚拟机数量、操作日志等信息。

1. 单击反亲和组名称项，进入反亲和组详情页面。
2. 详情页面顶部菜单项支持对反亲和组进行管理操作。
3. 查看反亲和组的基本信息，包括云上ID、ID、名称、状态、域、项目、启用状态、绑定主机数量、策略、粒度、创建时间、更新时间、备注等。

### 查看反亲和组的关联虚拟机

该功能用于查看加入到反亲和组的虚拟机信息。

1. 在反亲和组详情页面，单击“关联主机”页签，进入关联主机页面。
2. 查看反亲和组绑定的虚拟机信息，包括名称、系统、状态、配置、关联时间、宿主机，以及支持解绑虚拟机操作。
    - 解绑：单击指定虚拟机右侧操作列 **_解绑_** 按钮，在弹出的操作确认对话框中单击 **_"确定"_** 按钮。

### 查看反亲和组操作日志信息

该功能用于查看反亲和组的操作日志信息。

1. 在反亲和组详情页面，单击“操作日志”页签，进入操作日志页面。
    - 加载更多日志：列表默认显示20条操作日志信息，如需查看更多操作日志，请单击 **_"加载更多"_** 按钮，获取更多日志信息。
    - 查看日志详情：单击操作日志右侧操作列 **_"查看"_** 按钮，查看日志的详情信息。支持复制详情内容。
    - 查看指定时间段的日志：如需查看某个时间段的操作日志，在列表右上方的开始日期和结束日期中设置具体的日期，查询指定时间段的日志信息。
    - 导出日志：目前仅支持导出本页显示的日志。单击右上角![](../../../images/system/download.png)图标，在弹出的导出数据对话框中，设置导出数据列，单击 **_"确定"_** 按钮，导出日志。

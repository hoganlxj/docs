---
title: "存储桶"
weight: 2
description: >
    存储桶用于存储用户的任意文件。
---

对象存储是用于存储任意文件的分布式存储服务。存储桶即bucket，用于存储对象文件。用户在存储文件之前必须先创建存储桶，云管平台以存储桶为对象存储的资源单位分配给项目使用。用户可以通过网络便捷的在对象存储中上传、下载以及分享文件。

云管平台目前支持对接并导入基于S3协议的对象存储服务MinIO、Ceph Radio以及公有云提供的对象存储服务。

使用流程：

1. （二者任选其一）在多云管理对接并导入开通对象存储服务的公有云账号资源，同步公有云平台上的存储桶；
2. （二者任选其一）在多云管理对接并导入本地部署的对象存储服务器的账号资源；
3. 创建存储桶，并为存储桶指定项目。
4. 项目中的用户可以在存储桶中上传、下载以及分享文件等。

**入口**：在云管平台单击左上角![](../../images/intro/nav.png)导航菜单，在弹出的左侧菜单栏中单击 **_"存储/对象存储/存储桶"_** 菜单项，进入存储桶页面。

![](../../images/storage/bucket.png)


## 新建存储桶

该功能用于新建存储桶。

{{% alert title="说明" %}}
在新建存储桶页面，可单击顶部“本地IDC”、“公有云”页签，切换创建不同平台上的存储桶。
{{% /alert %}}

### 新建本地IDC存储桶

在新建本地IDC存储桶之前请确保有对象存储S3/Ceph/XSKY的云账号。

1. 在存储桶页面，单击顶部“全部”或“本地IDC”页签，单击列表上方 **_"新建"_** 按钮，弹出新建存储桶对话框。
2. 配置以下参数：
   - 指定项目：管理员和域管理员在新建存储桶时需要指定存储桶的所属项目。
   - 区域：选择存储桶所属的区域。
   - 名称：设置存储桶的名称。存储桶名称全局唯一，不建议使用常用名称如test等，以防创建失败。
   - 指定云订阅：指定创建存储桶的云订阅。
3. 单击 **_"确定"_** 按钮，创建存储桶。

### 新建公有云存储桶

在新建公有云平台弹性公网IP之前请确保有对应平台的云账号。

{{% alert title="说明" %}}
目前仅支持创建阿里金融云外网区域的存储桶。
{{% /alert %}}

1. 在存储桶页面，单击顶部“公有云”页签，单击列表上方 **_"新建"_** 按钮，弹出新建存储桶对话框。
2. 设置以下参数：
   - 指定项目：管理员和域管理员在新建存储桶时需要指定存储桶的所属项目。
   - 区域：选择弹性公网IP所属的区域。可通过城市、平台快速过滤筛选出合适区域。
   - 名称：设置存储桶的名称。
   - 指定云订阅：指定创建存储桶的云订阅。
3. 单击 **_"确定"_** 按钮，创建存储桶。

## 同步状态

该功能用于获取存储桶的当前状态。

**单个同步状态**

1. 在存储桶页面，单击存储桶右侧操作列 **_"同步状态"_** 按钮，同步存储桶状态。

**批量同步状态**

1. 在存储桶列表中勾选一个或多个存储桶，单击 **_"批量操作"_** 按钮，选择 **_"同步状态"_** 菜单项，批量同步存储桶状态。

## 设置上限

该功能用于设置存储桶支持存储文件的容量大小和个数上限。

1. 在存储桶页面，根据需要设置上限的存储桶数量，选择设置上限的方式。
    - 为单个存储桶设置上限：单击存储桶右侧操作列 **_"更多"_** 按钮，选择 **_"设置上限"_** 菜单项，弹出设置上限对话框。
    - 为多个存储桶设置上限：在存储桶列表中勾选一个或多个存储桶，单击 **_"批量操作"_** 按钮，选择 **_"设置上限"_** 菜单项，弹出设置上限对话框。
2. 设置存储桶的容量上限和对象上限（其中0表示无限制），单击 **_"确定"_** 按钮。

## 设置共享

该功能用于设置存储的共享范围。

项目资源的共享范围有五种：

- 不共享（私有）：即项目资源只能本项目的用户可以使用。
- 项目共享-部分（本域内多项目共享）：即项目资源可以共享到同域下的指定项目（一个或多个），只有本项目和被共享项目下的用户可以使用项目资源。
- 项目共享-全部（本域共享）：即项目资源可以共享给域下所有项目，即项目所在域的用户都可以使用项目资源。
- 域共享-部分（多域共享）：即项目资源可以共享到指定域（一个或多个），只有项目资源所在域和共享域下的用户可以使用项目资源。
- 域共享-全部（全局共享）：即项目资源可以共享给全部域使用，即系统中所有用户都可以使用项目资源。

{{% alert title="说明" %}}
设置域共享的条件：

- 在{{<oem_name>}}平台已开启三级权限。
- 用户处于管理后台。

设置项目共享的条件：

- 用户处于管理后台或域管理后台。

{{% /alert %}}

{{% alert title="注意" color="warning" %}}
- 存储桶的共享范围与云账号的共享范围有关。
    - 当云账号不共享时，通过云账号同步下来的资源也不能共享。
    - 当云账号启用共享时，通过云账号同步下来的资源也将随着云账号启用共享。
    - 当云账号启用共享时，通过云账号同步下来的资源可以更改共享范围，请确保共享范围在云账号的共享范围内。
    - 当云账号修改共享范围时，通过云账号同步下来的资源的共享范围要始终保持在云账号的共享范围内。如云账号共享A、B、C、D域，域资源共享A、C域，云账号修改共享范围为A、B域，则域资源只能共享到A域。
    - 云账号共享云订阅时，通过云账号同步下来的域资源不能共享。
{{% /alert %}}

**单个存储桶设置共享**

1. 在存储桶页面，单击存储桶右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"设置共享"_** 菜单项，弹出设置共享对话框。
2. 配置以下参数。
   - 当共享范围选择为“不共享”时，即项目资源的共享范围为私有，仅本项目的用户可以使用。
   - 当共享范围选择为“项目共享”时，需要选择本域下可共享的项目。
       - 当项目选择同域下的一个或多个项目时，即项目资源的共享范围为项目共享-部分，只有项目资源所在项目和共享项目下的用户可以使用项目资源。
       - 当项目选择全部时，即项目资源的共享范围为项目共享-全部，项目所在域下的用户都可以使用项目资源。
   - 当共享范围选择为“域共享”时，需要选择共享的域。
       - 当域选择其中的一个或多个域时，即项目资源的共享范围为域共享-部分，只有项目资源所在域和共享域下的用户可以使用域资源。
       - 当域选择全部时，即项目资源的共享范围为域共享-全部，系统中的所有用户都可以使用项目资源。
3. 单击 **_"确定"_** 按钮，完成操作。

**批量设置共享**

多个存储桶批量设置的共享范围必须相同。否则请单独为存储桶设置共享。

1. 在存储桶列表中选择一个或多个存储桶，单击列表上方 **_"批量操作"_** 按钮，选择下拉菜单 **_"设置共享"_** 菜单项，弹出设置共享对话框。
2. 配置以下参数。
   - 当共享范围选择为“不共享”时，即项目资源的共享范围为私有，仅本项目的用户可以使用。
   - 当共享范围选择为“项目共享”时，需要选择本域下可共享的项目。
       - 当项目选择同域下的一个或多个项目时，即项目资源的共享范围为项目共享-部分，只有项目资源所在项目和共享项目下的用户可以使用项目资源。
       - 当项目选择全部时，即项目资源的共享范围为项目共享-全部，项目所在域下的用户都可以使用项目资源。
   - 当共享范围选择为“域共享”时，需要选择共享的域。
       - 当域选择其中的一个或多个域时，即项目资源的共享范围为域共享-部分，只有项目资源所在域和共享域下的用户可以使用域资源。
       - 当域选择全部时，即项目资源的共享范围为域共享-全部，系统中的所有用户都可以使用项目资源。
3. 单击 **_"确定"_** 按钮，完成操作。

## 设置读写权限

该功能用于设置存储桶的读写权限。

{{% alert title="说明" %}}
- 腾讯云存储桶不支持公开读写；
- Azure存储桶不支持认证用户可读和公开读写；
- AWS存储桶不支持超认证用户可读、本账号写公开读和公开读写；
- 阿里云、Ceph存储桶不支持认证用户可读；
- 阿里金融云内网区域的存储桶不支持设置读写权限的操作。
{{% /alert %}}

1. 在存储桶页面，单击存储桶右侧操作列的 **_"更多"_** 按钮，选择 **_"设置读写权限"_** 菜单项，弹出设置访问权限设置对话框。
2. 设置读写权限：包括本账号读写、本账号公开读、公开读写。
    - 本账号读写：只有用户本人可以读写指定存储桶中的数据。
    - 认证用户可读：已认证用户可读取bucket中的数据，仅用户本人可执行写操作。
    - 本账号写公开读：任何用户均可读取存储桶中的数据，但是向存储桶写数据需要进行身份验证。
    - 公开读写：任何用户均可读写存储桶中的数据，无需身份验证，该权限安全风险极高，为保证您的数据安全，请谨慎选择。
3. 单击 **_"确定"_** 按钮，完成操作。

## 更改项目

该功能用于更改存储桶的所属项目，只有项目里的用户才可以使用存储桶存储文件。

**单个存储桶更改项目**

1. 在存储桶页面，单击存储桶右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"更改项目"_** 菜单项，弹出更改项目对话框。
2. 选择域和项目，单击 **_"确定"_** 按钮，完成操作。

**批量更改项目**

1. 在存储桶列表中勾选一个或多个存储桶，单击 **_"批量操作"_** 按钮，选择 **_"更改项目"_** 菜单项，弹出更改项目对话框。
2. 选择域和项目，单击 **_"确定"_** 按钮，完成操作。

## 删除存储桶

该功能用于删除时存储桶，当存储桶中不存在文件时，才可以删除。

{{% alert title="说明" %}}
阿里金融云内网区域的存储桶不支持设置读写权限的操作。
{{% /alert %}}

**单个删除**

1. 在存储桶页面，单击存储桶右侧操作列 **_"更多"_** 按钮，选择 **_"删除"_** 菜单项，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，完成操作。

**批量删除**

1. 在存储桶列表中勾选一个或多个存储桶，单击 **_"批量操作"_** 按钮，选择 **_"删除"_** 菜单项，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，完成操作。

## 查看存储桶详情

该功能用于查看存储桶的详细信息。

1. 在存储桶页面，单击指定存储桶名称项，进入文件列表页面。
2. 单击“详情”页签，进入存储桶详情页面。
3. 查看以下信息
    - 基本信息：包括存储桶的云上ID、ID、名称、状态、域、项目、共享范围、平台、区域、位置（可用于查看阿里金融云存储桶是否为内网区域）、存储类型、可用区、云账号、创建时间、更新时间、备注等。
    - 访问域名：创建存储桶后会生成对应的访问域名以及S3网关，用户可通过S3网关统一管理存储桶等。
    - CDN加速域名：显示存储桶设置的CDN加速域名。
    - 静态网站：显示存储桶静态网站的访问链接等。
    - 用量统计：存储桶已使用容量统计。包括存储用量以及文件数量。
    - 用量上限：存储桶设置的容量上限。包括存储容量上限和文件数量上限。
    - 访问权限：设置存储桶的访问权限，包括本账号读写、本账号公开读、公开读写，本账号的信息可通过查看存储桶的后端访问信息获取。
        - 本账号读写：只有用户本人可以读写指定存储桶中的数据。
        - 认证用户可读：已认证用户可读取bucket中的数据，仅用户本人可执行写操作。
        - 本账号公开读：任何用户均可读取存储桶中的数据，但是向存储桶写数据需要进行身份验证。
        - 公开读写：任何用户均可读写存储桶中的数据，无需身份验证，该权限安全风险极高，为保证您的数据安全，请谨慎选择。
    - 防盗链：显示存储桶是否设置了防盗链。

### 设置静态网站

对象存储支持在存储桶上托管静态网站，用户需要将静态网站的配置文件等上传到存储桶，设置文件的访问权限，通过设置静态网站功能设置静态网站展示的索引页和错误页等信息。配置完成后，用户可以通过访问域名访问静态网站，访问成功时，将跳转到索引页面，访问错误时，将跳转到错误页。

静态网站是指所有的网页都由静态内容构成，包括客户端执行的脚本，例如JavaScript。对象存储不支持涉及到需要服务器端处理的内容，例如PHP、JSP、ASP.NET等。

{{% alert title="说明" %}}
目前仅腾讯云支持。
{{% /alert %}}

1. 在存储桶页面，单击指定存储桶名称项，进入文件列表页面。
2. 单击“详情”页签，进入存储桶详情页面。
3. 在静态网站模块，单击访问地址右侧 **_"设置静态网站"_** 按钮，弹出设置静态网站对话框。
4. 配置以下参数：
    - 状态：选择是否启用托管静态网站功能，启用后，才可以配置下面参数。
    - 索引文档：索引文档即静态网站的首页，当用户访问静态网站时将会默认访问该页面。大多数情况下，索引文档是index.html。
    - 错误文档：当用户访问静态网站出错时，将会返回404错误码以及指定的错误文档的信息。大多数情况下，错误文档是error.html。

### 设置防盗链

为了防止存储桶的数据被盗链而给用户产生不必要的损失，对象存储支持设置防盗链的功能。

HTTP协议支持通过表头referer字段可以获取访问目标网页的来源网页，防盗链即通过设置referer，去检测请求的referer的字段信息，是否与用于设置的黑白名单匹配，若与白名单匹配则允许访问，否则则阻止访问等。

{{% alert title="说明" %}}
- 目前仅腾讯云支持。
- 若访问腾讯云存储桶时带有签名（不论URL和Header），则不进行防盗链验证。
{{% /alert %}}

1. 在存储桶页面，单击指定存储桶名称项，进入文件列表页面。
2. 单击“详情”页签，进入存储桶详情页面。
3. 在防盗链模块，单击 **_"设置"_** 按钮，弹出设置防盗链对话框。
4. 配置以下参数：
    - 空referer：是否允许HTTP或HTTPS header中包括空referer（header不带referer字段或referer字段为空）的请求访问对象存储资源。
    - 白名单referer：允许白名单内的域名访问存储桶的默认访问地址。
5. 单击 **_"确定"_** 按钮，

## 文件管理

该功能用于管理文件和文件夹。

{{% alert title="注意" color="warning" %}}
- 在云管平台上的AWS-中国区云账号上的存储桶中文件无论设置什么权限，都无法通过界面下载或url分享等方式下载文件。
- 阿里金融云内网区域的存储桶不支持文件管理等相关操作。
{{% /alert %}}


### 上传文件

该功能用于向指定存储桶中上传文件。最多支持4个文件同时上传，请注意如有同名文件，将会覆盖之前上传的文件。

{{% alert title="注意" color="warning" %}}

导入Azure云账号资源后，Azure存储桶不支持在根目录下上传文件。请在根目录下的文件夹里上传文件。

{{% /alert %}}

1. 在存储桶页面，单击指定存储桶名称项，进入文件列表页面。 
2. 单击列表上方 **_"上传文件"_** 按钮，弹出上传文件对话框。
3. 支持直接拖拽文件到虚线框或单击“直接上传”超链接选择上传文件，单击 **_"确定"_** 按钮，上传文件。

### 下载文件

该功能支持用户下载文件到本地。

1. 在存储桶页面，单击指定存储桶名称项，进入文件列表页面。 
2. 单击文件右侧操作列的 **_"下载"_** 按钮，浏览器下载或打开文件。
3. 若下载的文件格式浏览器支持打开，浏览器将会直接打开文件而不会下载，建议在浏览器上将文件另存为，并保存到本地。
4. 若下载的文件格式浏览器不支持打开，浏览器将会直接下载文件。

### 删除文件

支持单个或批量删除文件。

**单个删除**

1. 在存储桶页面，单击指定存储桶名称项，进入文件列表页面。 
2. 单击文件右侧操作列的 **_"删除"_** 按钮，弹出操作确认对话框。
3. 单击 **_"确定"_** 按钮，完成操作。

**批量删除**

1. 在文件列表中勾选一个或多个文件（夹），单击 **_"删除"_** 按钮，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，完成操作。

### 生成URL

该功能用于生成文件的临时URL地址，供用户分享。

1. 在存储桶页面，单击指定存储桶名称项，进入文件列表页面。 
2. 单击文件右侧操作列的 **_"更多"_** 按钮，选择 **_"生成Url"_** 菜单项，弹出生成URL对话框。
3. 设置连接有效时间（在有效时间内其他用户可以通过URL地址访问文件）生成临时URL，单击“复制文件URL”，复制文件URL地址到剪贴板，用户可粘贴分析该URL地址。
4. 单击 **_"关闭"_** 按钮，关闭对话框。

### 设置读写权限

该功能用于设置文件（夹）的读写权限，若不设置该项，文件的读写权限默认同存储桶一致。

{{% alert title="注意" color="warning" %}}

Azure存储桶中的文件不支持设置读写权限，文件的读写权限与存储桶一致。

{{% /alert %}}

**单个文件设置读写权限**

1. 在存储桶页面，单击指定存储桶名称项，进入文件列表页面。 
2. 单击文件右侧操作列的 **_"更多"_** 按钮，选择 **_"设置读写权限"_** 菜单项，弹出设置访问权限设置对话框。
3. 设置读写权限：包括本账号读写、本账号公开读、公开读写。
   - 本账号读写：只有用户本人可以读写指定存储桶中的数据。
   - 本账号公开读：任何用户均可读取存储桶中的数据，但是向存储桶写数据需要进行身份验证。
   - 公开读写：任何用户均可读写存储桶中的数据，无需身份验证，该权限安全风险极高，为保证您的数据安全，请谨慎选择。
4. 单击 **_"确定"_** 按钮，完成操作。

**批量设置读写权限**

{{% alert title="说明" %}}

为存储桶中的文件夹设置读写权限，文件夹中的文件都将与文件夹权限保持一致。

{{% /alert %}}

1. 在存储桶页面，单击指定存储桶名称项，进入文件列表页面。 
2. 在文件列表选择一个或多个文件（夹），单击列表上方 **_"更多"_** 按钮，选择 **_"设置读写权限"_** 菜单项，弹出设置访问权限设置对话框。
3. 设置读写权限：包括本账号读写、本账号公开读、公开读写。
   - 本账号读写：只有用户本人可以读写指定存储桶中的数据。
   - 本账号公开读：任何用户均可读取存储桶中的数据，但是向存储桶写数据需要进行身份验证。
   - 公开读写：任何用户均可读写存储桶中的数据，无需身份验证，该权限安全风险极高，为保证您的数据安全，请谨慎选择。
4. 单击 **_"确定"_** 按钮，完成操作。

### 设置HTTP头

该功能用于设置文件的HTTP头，当文件的HTTP头编码与文件本身的编码不对应时会导致文件通过浏览器打开显示乱码，此时用户可以通过设置HTTP头功能改变文件的默认HTTP头的编码方式。

**单个文件设置HTTP头**

1. 在存储桶页面，单击指定存储桶名称项，进入文件列表页面。 
2. 单击文件右侧操作列的 **_"更多"_** 按钮，选择 **_"设置HTTP头"_** 菜单项，弹出设置HTTP头对话框。
3. 设置以下参数：
   - Content-Type：文件类型，如image/png、"text/html; charset=UTF-8"等。
   - Content-Encoding：编码方式，如gzip、compress、identity等。
   - Content-Language：语言，如de-DE、en-CA等。
   - Content-Disposition：内容呈现方式，其中inline表示可以在浏览器中和页面内容一起显示（如图片），attachment表示是下载的内容。
   - Cache-Control：缓存控制，如no-cache、no-store等。
4. 单击 **_"确定"_** 按钮，完成操作。

**批量设置HTTP头**

1. 在存储桶页面，单击指定存储桶名称项，进入文件列表页面。 
2. 在文件列表中选择一个或多个文件，单击列表上方 **_"更多"_** 按钮，选择 **_"设置HTTP头"_** 菜单项，弹出设置HTTP头对话框。
3. 设置以下参数：
   - Content-Type：文件类型，如image/png、"text/html; charset=UTF-8"等。
   - Content-Encoding：编码方式，如gzip、compress、identity等。
   - Content-Language：语言，如de-DE、en-CA等。
   - Content-Disposition：内容呈现方式，其中inline表示可以在浏览器中和页面内容一起显示（如图片），attachment表示是下载的内容。
   - Cache-Control：缓存控制，如no-cache、no-store等。
4. 单击 **_"确定"_** 按钮，完成操作。

### 文件夹管理

文件夹主要用于管理文件，对文件分类。在文件夹中支持对文件的上传、下载、分享等全部功能。文件夹支持嵌套，即在文件夹中新建文件夹等。

#### 新建文件夹

该功能用于新建文件夹，用于管理文件。

1. 在存储桶页面，单击指定存储桶名称项，进入文件列表页面。 
2. 单击列表上方 **_"新建文件夹"_** 按钮，弹出新建文件夹对话框。
3. 设置文件夹名称，单击 **_"确定"_** 按钮。

#### 删除文件夹

该功能用于删除文件夹，支持单个或批量删除文件夹。

**单个删除**

1. 在存储桶页面，单击指定存储桶名称项，进入文件列表页面。 
2. 单击指定文件夹右侧操作列的 **_"删除"_** 按钮，弹出操作确认对话框。
3. 单击 **_"确定"_** 按钮，完成操作。

**批量删除**

1. 在存储桶页面，单击指定存储桶名称项，进入文件列表页面。 
2. 在文件列表中勾选一个或多个文件夹，单击 **_"删除"_** 按钮，弹出操作确认对话框。
3. 单击 **_"确定"_** 按钮，完成操作。

## 跨域规则

在通常的网页请求中，由于同源策略（same-origin policy）的限制，不同域（同协议、同域名（或IP）以及同端口视为一个域）之间无法进行交互。而跨域资源共享（CORS）通过在HTTP头中添加Origin字段允许服务器声明哪些源站通过浏览器有权限访问哪些资源等实现不同域之间的资源交互。


### 新建跨域访问规则

该功能用于创建跨域访问规则。

1. 在存储桶页面，单击指定存储桶名称项，进入文件列表页面。
2. 单击“跨域访问”页签，进入跨域访问页面。
3. 单击 **_"新建"_** 按钮，弹出新建跨域访问规则。
4. 配置以下参数：
    - 来源：允许跨域请求的来源。可以同时指定多个来源，每行只能填写一个。
    - 允许的方法：支持 GET、PUT、POST、DELETE、HEAD。
    - 允许的头部：允许使用哪些自定义头部的请求访问。
    - 暴露的头部：CORS响应中带的额外头部，给客户端提供额外的信息。
    - 缓存时间：请求得到结果的有效期。
5. 单击 **_"确定"_** 按钮，完成操作。

### 修改跨域访问规则

该功能用于修改跨域访问规则。

1. 在存储桶页面，单击指定存储桶名称项，进入文件列表页面。
2. 单击“跨域访问”页签，进入跨域访问页面。
3. 单击跨域规则右侧操作列 **_"修改"_** 按钮，弹出修改跨域访问规则。
4. 支持修改以下参数：
    - 来源：允许跨域请求的来源。可以同时指定多个来源，每行只能填写一个。
    - 允许的方法：支持 GET、PUT、POST、DELETE、HEAD。
    - 允许的头部：允许使用哪些自定义头部的请求访问。
    - 暴露的头部：CORS响应中带的额外头部，给客户端提供额外的信息。
    - 缓存时间：请求得到结果的有效期。
5. 单击 **_"确定"_** 按钮，完成操作。

### 删除跨域访问规则

该功能用于删除跨域访问规则。

**单个删除**

1. 在存储桶页面，单击指定存储桶名称项，进入文件列表页面。
2. 单击“跨域访问”页签，进入跨域访问页面。
3. 单击跨域规则右侧操作列 **_"删除"_** 按钮，弹出操作确认对话框。
4. 单击 **_"确定"_** 按钮，完成操作。

**批量删除**

1. 在存储桶页面，单击指定存储桶名称项，进入文件列表页面。
2. 单击“跨域访问”页签，进入跨域访问页面。
3. 在列表中选择一个或多个跨域规则，单击列表上方**_"删除"_** 按钮，弹出操作确认对话框。
4. 单击 **_"确定"_** 按钮，完成操作。

## 授权策略

该功能用于控制公有云根账号、子账号访问存储桶和对象的权限等。

### 新建授权策略

该功能用于新建授权策略。授权策略用于定义指定用户对指定资源的指定操作权限。

1. 在存储桶页面，单击指定存储桶名称项，进入文件列表页面。
2. 单击“授权策略”页签，进入授权策略页面。
3. 单击 **_"新建"_** 按钮，弹出新建授权策略对话框。
4. 配置以下参数：
    - 策略效果：目前仅支持允许。
    - 用户：授权策略中支持访问资源的用户，目前支持设置根账号以及当前账号的子账号。当设置根账号时，需要输入对应的根账号ID。
    - 资源：支持用户访问的资源，支持设置为整个存储桶或存储桶下的指定资源。
    - 资源路径：当资源为“整个存储桶”时，资源路径不可设置；当资源为“指定资源”时，设置具体的资源路径，支持同时设置多个资源路径。
    - 操作：设置用户对资源的操作权限，包括只读、读/写、完全控制等。
5. 单击 **_"确定"_** 按钮，完成操作

### 删除授权策略

该功能用于删除授权策略。

**单个删除**

1. 在存储桶页面，单击指定存储桶名称项，进入文件列表页面。
2. 单击“授权策略”页签，进入授权策略页面。
3. 单击授权策略右侧操作列 **_"删除"_** 按钮，弹出操作确认对话框。
4. 单击 **_"确定"_** 按钮，完成操作

**批量删除**

1. 在存储桶页面，单击指定存储桶名称项，进入文件列表页面。
2. 单击“授权策略”页签，进入授权策略页面。
3. 在列表中选择一个或多个授权策略，单击列表上方 **_"删除"_** 按钮，弹出操作确认对话框。
4. 单击 **_"确定"_** 按钮，完成操作

## 查看存储桶监控

该功能用于查看存储桶的监控信息。目前仅支持对接阿里云、华为云的存储桶监控。

1. 在存储桶页面，单击指定存储桶名称项，进入文件列表页面。
2. 单击“监控”页签，进入监控页面。
3. 查看存储桶GET类请求次数以及GET类请求首字节平均时延。

## 查看存储桶操作日志

该功能用于查看针对于存储桶所做的操作的日志信息。

1. 在存储桶页面，单击指定存储桶名称项，进入文件列表页面。
2. 单击“操作日志”页签，进入操作日志页面。
    - 加载更多日志：列表默认显示20条操作日志信息，如需查看更多操作日志，请单击 **_"加载更多"_** 按钮，获取更多日志信息。
    - 查看日志详情：单击操作日志右侧操作列 **_"查看"_** 按钮，查看日志的详情信息。支持复制详情内容。
    - 查看指定时间段的日志：如需查看某个时间段的操作日志，在列表右上方的开始日期和结束日期中设置具体的日期，查询指定时间段的日志信息。
    - 导出日志：目前仅支持导出本页显示的日志。单击右上角![](../../images/system/download.png)图标，在弹出的导出数据对话框中，设置导出数据列，单击 **_"确定"_** 按钮，导出日志。

## 查看存储桶多层级组织架构

该功能用于通过项目标签进行多个层级的存储桶资源过滤及展示。

1. 在存储桶页面，单击搜索框左侧图标，展开层级项目。
2. 单击右上角设置图标，进入配置层级页面。
3. 单击“添加层级”，可添加多个层级，每个层级选择好项目标签后，单击“确定”按钮。
4. 新建项目标签的具体操作方法请参考[项目](../../iam/keystone/project)。

## 如何通过S3网关管理存储桶中文件？

S3网关（S3gateway）是提供s3标准API的统一对象存储网关，网关后端对接云管平台的对象存储。用户可通过标准S3客户端和SDK访问S3网关，实现对多云对象存储的统一访问。

1. 获取存储桶的S3网关地址。

    在{{<oem_name>}}控制台中，在指定bucket的详情页面的访问域名中可找到描述s3gateway的URL，该URL的主机地址即为s3gateway的接入地址。

    ![](../../images/storage/s3gateway.png)

2. 在{{<oem_name>}}控制台创建AccessKey/AccessKey secret.

    1. 在{{<oem_name>}}控制台的个人信息区域中，单击右上角![](../../images/intro/userinfo1.png)图标，选择下拉菜单 **_"访问凭证"_** 菜单项，进入AccessKey管理页面。

        ![](../../images/storage/AccessKey.png)

    2. 单击列表上方 **_"新建"_** 按钮，创建AccessKey和AccessKey Secret，查看并复制AccessKey和AccessKey Secret信息，支持将Accesskey保存到本地。

        ![](../../images/storage/AK_AS.png)

3. 在标准S3客户端Cyberduck中填入网关地址和AccessKey ID、AccessKey Secret。

    1. 请先在官网https://cyberduck.io/ 下载cyberduck客户端，并安装。
    
    2. 安装后，打开Cyberduck客户端，单击 **_"新建连接"_** 按钮。配置以下参数。

        - 选择连接类型为“Amazon S3”。
        - 在服务器端口中设置地址为S3网关地址。
        - 访问密钥ID设置为AccessKey ID。
        - 访问私钥设置为 AccessKey Secret。
        - 单击 **_"连接"_** 按钮。

        ![](../../images/storage/s3connection.png)

{{% alert title="注意" color="warning" %}}

由于s3gateway采用自签名证书，会提示不安全证书，选择“继续”和“总是信任”。

{{% /alert %}}
      ![](../../images/storage/certificate.png)
      ![](../../images/storage/validcert1.png)  

4. 通过Cyberduck客户端管理S3文件目录，并且可以方便的上传、下载、移动、拷贝以及删除文件等。


